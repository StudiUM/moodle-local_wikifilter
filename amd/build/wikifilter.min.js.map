{"version":3,"file":"wikifilter.min.js","sources":["../src/wikifilter.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for the wikifilter form class.\n *\n * @module    mod_wikifilter/wikifilter\n * @author    Annouar Faraman <annouar.faraman@umontreal.ca>\n * @copyright 2021 Université de Montréal\n * @license   https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/form-autocomplete',\n    'core/str', 'core/notification'\n], function(\n    $,\n    ajax,\n    autocomplete,\n    str,\n    notification\n) {\n    /**\n     * Wikifilter associations list.\n     */\n    function AssociationsList() {\n        this.table = $('#id_associations_table');\n        this.tableClone = $('#table_clone');\n        this.rowClone = $('.row_clone', this.tableClone);\n        this.emptyRowClone = $('.empty_row_clone', this.tableClone);\n        this.addRow = function(selectedRole, selectedTags) {\n            var newRow = this.rowClone.clone();\n            newRow.removeClass('row_clone');\n\n            var newRowData = this.buildRowData(selectedRole, selectedTags);\n            this.fillRow(newRow, newRowData);\n\n            if ($('tr.empty_row').length) {\n                $('tr.empty_row').remove();\n            }\n\n            $('tbody', this.table).append(newRow);\n        };\n        this.modifyRow = function(row, selectedRole, selectedTags) {\n            var rowData = this.buildRowData(selectedRole, selectedTags);\n            this.fillRow(row, rowData);\n        };\n        this.deleteRow = function(row) {\n            row.remove();\n            if (!$('tbody .actions', this.table).length) {\n                var emptyRow = this.emptyRowClone.clone();\n                emptyRow.removeClass('empty_row_clone').addClass('empty_row');\n                $('tbody', this.table).append(emptyRow);\n            }\n        };\n        this.empty = function() {\n            if (!$('.empty_row', this.table).length) {\n                $('tbody .actions', this.table).closest('tr').remove();\n                var emptyRow = this.emptyRowClone.clone();\n                emptyRow.removeClass('empty_row_clone').addClass('empty_row');\n                $('tbody', this.table).append(emptyRow);\n            }\n\n        };\n        this.buildRowData = function(selectedRole, selectedTags) {\n            // Building role Cell.\n            var roleCell = selectedRole.name;\n\n            // Building tags and actions cells.\n            var tagsCell = '';\n            var actionsCell = '';\n            selectedTags.each(function() {\n                var thisTagElement = $(this);\n                var thisTagId = thisTagElement.attr('data-value');\n                var thisTagText = thisTagElement.text().replace('×', '');\n\n                tagsCell += '<span class=\"badge badge-info mb-3 mr-1\" data-id=\"' + thisTagId + '\">' + thisTagText + '</span>';\n                actionsCell += '<input name=\"associations[]\" type=\"hidden\" value=\"' + selectedRole.id + '-' + thisTagId + '\">';\n            });\n\n            var rowData = {roleId: selectedRole.id, roleName: selectedRole.name,\n                    roleCell: roleCell, tagsCell: tagsCell, actionsCell: actionsCell};\n\n            return rowData;\n        };\n        this.fillRow = function(row, data) {\n            $('.role', row).html(data.roleCell);\n            $('.tags', row).html(data.tagsCell);\n            $('.actions .db-data', row).html(data.actionsCell);\n            $('.actions', row).attr('data-roleid', data.roleId);\n            $('.actions', row).attr('data-rolename', data.roleName);\n        };\n    }\n\n    /**\n     * Wikifilter association role select.\n     */\n     function AssociationRoleSelect() {\n        this.id = '#id_role';\n        this.element = $(this.id);\n        this.showInEditMode = function(role) {\n            this.addOption(role.id, role.name);\n            this.setValue(role.id);\n            this.disable();\n        };\n        this.showInAddMode = function(selectedRoles) {\n            var thisObject = this;\n            this.enable();\n            $('.actions', selectedRoles).each(function() {\n                var thisRoleId = $(this).attr('data-roleid');\n                thisObject.deleteOption(thisRoleId);\n            });\n        };\n        this.setValue = function(value) {\n            this.element.val(value);\n        };\n        this.getSelectedOption = function() {\n            return {id: this.element.val(), name: this.element.find('option:selected').text()};\n        };\n        this.deleteSelectedOption = function() {\n            this.element.find('option:selected').remove();\n        };\n        this.addOption = function(key, value) {\n            $('<option/>').val(key).remove().html(value).appendTo(this.id);\n        };\n        this.deleteOption = function(id) {\n            this.element.find('option[value=\"' + id + '\"]').remove();\n        };\n        this.enable = function() {\n            this.element.prop(\"disabled\", false);\n        };\n        this.disable = function() {\n            this.element.prop(\"disabled\", true);\n        };\n    }\n\n    /**\n     * Wikifilter association tags select.\n     */\n     function AssociationTagsSelect() {\n        this.id = '#id_wikitags';\n        this.element = $(this.id);\n        this.showInEditMode = function(selectedTags) {\n            var thisObject = this;\n            selectedTags.each(function() {\n                var thisTagId = $(this).attr('data-id');\n                thisObject.selectOption(thisTagId);\n            });\n\n            this.buildAutocompleteComponent();\n        };\n        this.selectOption = function(id) {\n            this.element.find('option[value=\"' + id + '\"]').prop(\"selected\", true);\n        };\n        this.unselectOptions = function() {\n            this.element.find('option:selected').prop(\"selected\", false);\n        };\n        this.buildAutocompleteComponent = function() {\n            var thisObject = this;\n            var stringkeys = [{key: 'search', component: 'wikifilter'}, {key: 'selectionarea', component: 'wikifilter'}];\n            str.get_strings(stringkeys).then(function(langstrings) {\n                var placeholder = langstrings[0];\n                var noSelectionString = langstrings[1];\n\n                thisObject.element.nextAll().remove();\n                autocomplete.enhance(thisObject.id, false, '', placeholder, false, true, noSelectionString, true);\n            }).fail(notification.exception);\n        };\n        this.loadOptions = function(data) {\n            var thisObject = this;\n            // Populate tags list.\n            this.element.empty();\n            $.each(data, function(key, value) {\n                $('<option/>').val(key).html(value).appendTo(thisObject.id);\n            });\n        };\n        this.reset = function() {\n            this.unselectOptions();\n            this.buildAutocompleteComponent();\n        };\n    }\n\n    /**\n     * Wikifilter associations editor.\n     */\n    function AssociationsEditor() {\n        this.associationsList = new AssociationsList();\n        this.associationRoleSelect = new AssociationRoleSelect();\n        this.associationTagsSelect = new AssociationTagsSelect();\n        this.associationEditorModal = $('#association-editor-modal');\n        this.addTitle = $('.modal-title.add', this.associationEditorModal);\n        this.editTitle = $('.modal-title.edit', this.associationEditorModal);\n        this.addBtn = $('.add-btn', this.associationEditorModal);\n        this.modifyBtn = $('.modify-btn', this.associationEditorModal);\n        this.deleteBtn = $('.delete-icon');\n        this.init = function() {\n            this.events();\n        };\n        this.events = function() {\n            // Show association editor modal event.\n            this.showModalEvent();\n\n            // Hide association editor modal event.\n            this.hideModalEvent();\n\n            // Add association event.\n            this.addEvent();\n\n            // Modify association event.\n            this.modifyEvent();\n\n            // Delete association event.\n            this.deleteEvent();\n        };\n        this.showModalEvent = function() {\n            var thisObject = this;\n            this.associationEditorModal.on('show.bs.modal', function(e) {\n                var callerBtn = $(e.relatedTarget);\n\n                if (callerBtn.hasClass('edit')) { // Edit mode.\n                    var thisRoleId = callerBtn.closest('.actions').attr('data-roleid');\n                    var thisRoleName = callerBtn.closest('.actions').attr('data-rolename');\n\n                    // Update modal header title and action buttons\n                    thisObject.updateModalSections('edit');\n                    thisObject.modifyBtn.attr('data-item', thisRoleId);\n\n                    // Show role select in edit mode.\n                    var role = {id: thisRoleId, name: thisRoleName};\n                    thisObject.associationRoleSelect.showInEditMode(role);\n\n                    // Show tags select in edit mode.\n                    var thisRoleRow = callerBtn.closest('tr');\n                    var thisRoleTags = $('.tags span', thisRoleRow);\n                    thisObject.associationTagsSelect.showInEditMode(thisRoleTags);\n\n                } else { // Add mode.\n                    // Show role select in add mode.\n                    thisObject.associationRoleSelect.showInAddMode(thisObject.associationsList.table);\n\n                }\n            });\n        };\n        this.hideModalEvent = function() {\n            var thisObject = this;\n            this.associationEditorModal.on('hidden.bs.modal', function() {\n                // Update modal header title and action buttons\n                thisObject.updateModalSections('add');\n\n                thisObject.removeErrors();\n\n                // Reset tags select.\n                thisObject.associationTagsSelect.reset();\n            });\n        };\n        this.updateModalSections = function(mode) {\n            if (mode == 'edit') {\n                this.addTitle.addClass('hidden');\n                this.editTitle.removeClass('hidden');\n                this.addBtn.addClass('hidden');\n                this.modifyBtn.removeClass('hidden');\n            } else {\n                this.addTitle.removeClass('hidden');\n                this.editTitle.addClass('hidden');\n                this.addBtn.removeClass('hidden');\n                this.modifyBtn.addClass('hidden');\n            }\n\n        };\n        this.addEvent = function() {\n            var thisObject = this;\n            var associationsList = this.associationsList;\n            var associationEditorModal = this.associationEditorModal;\n\n            // Adding addassociation button click event.\n            this.addBtn.click(function() {\n                var tagsSelection = $('.form-autocomplete-selection', associationEditorModal);\n\n                // Validate associations form.\n                var isValid = thisObject.validate(tagsSelection);\n                if (isValid) {\n                    // Adding new row.\n                    var selectedRole = thisObject.associationRoleSelect.getSelectedOption();\n                    var selectedTags = $('.badge', tagsSelection);\n                    associationsList.addRow(selectedRole, selectedTags);\n\n                    // Adding new row delete association button click event.\n                    $('tr:last .delete-icon', associationsList.table).click(function() {\n                        var thisRow = $(this).closest('tr');\n                        var thisRoleId = $('.actions', thisRow).attr('data-roleid');\n                        var thisRoleName = $('.actions', thisRow).attr('data-rolename');\n                        thisObject.associationRoleSelect.addOption(thisRoleId, thisRoleName);\n                        associationsList.deleteRow(thisRow);\n                    });\n\n                    // Deleting selected role from roleSelect.\n                    thisObject.associationRoleSelect.deleteSelectedOption();\n\n                    // Showing modal.\n                    associationEditorModal.modal('hide');\n\n                } else {\n                    // Tags selection input focus event.\n                    tagsSelection.next().find('input').focus(function() {\n                        thisObject.removeErrors();\n                    });\n                }\n            });\n        };\n        this.modifyEvent = function() {\n            var thisObject = this;\n            var associationsList = this.associationsList;\n            var associationEditorModal = this.associationEditorModal;\n\n            // Adding modify association button click event.\n            this.modifyBtn.click(function() {\n                var tagsSelection = $('.form-autocomplete-selection', associationEditorModal);\n\n                var isValid = thisObject.validate(tagsSelection);\n                if (isValid) {\n                    // Modifying row.\n                    var selectedRole = thisObject.associationRoleSelect.getSelectedOption();\n                    var thisRow = $('.actions[data-roleid=\"' + selectedRole.id + '\"]').closest('tr');\n                    var selectedTags = $('.badge', tagsSelection);\n                    associationsList.modifyRow(thisRow, selectedRole, selectedTags);\n\n                    // Hiding modal.\n                    associationEditorModal.modal('hide');\n                } else {\n                    tagsSelection.next().find('input').focus(function() {\n                        thisObject.removeErrors();\n                    });\n                }\n            });\n        };\n        this.deleteEvent = function() {\n            var thisObject = this;\n            var associationsList = this.associationsList;\n\n            // Adding delete association button click event.\n            this.deleteBtn.click(function() {\n                var thisRow = $(this).closest('tr');\n                var thisRoleId = $('.actions', thisRow).attr('data-roleid');\n                var thisRoleName = $('.actions', thisRow).attr('data-rolename');\n                thisObject.associationRoleSelect.addOption(thisRoleId, thisRoleName);\n                associationsList.deleteRow(thisRow);\n            });\n        };\n        this.validate = function() {\n            this.removeErrors();\n            var selectionArea = $('.form-autocomplete-selection', this.associationEditorModal);\n            if (!$('.badge', selectionArea).length) {\n                $('.select-tag-error').removeClass('hidden');\n                selectionArea.next().find('input').addClass('has-error');\n                return false;\n            }\n            return true;\n        };\n        this.removeErrors = function() {\n            $('.select-tag-error', this.associationEditorModal).addClass('hidden');\n            $('.has-error', this.associationEditorModal).removeClass('has-error');\n        };\n    }\n\n    /**\n     * Wikifilter editor.\n     */\n    function WikifilterEditor() {\n        this.wiki = $('#id_wiki');\n        this.associations = $('#id_associations');\n        this.associationsEditor = new AssociationsEditor();\n        this.init = function() {\n            this.wikiChangeEvent();\n            this.associationsEditor.init();\n        };\n        this.wikiChangeEvent = function() {\n            var thisObject = this;\n            this.wiki.change(function() {\n                var wikiID = $(this).val();\n                var course = $('input[name=course]').val();\n                ajax.call([{\n                    methodname: 'wikifilter_external_getwikipagestags',\n                    args: {\n                        id:  wikiID,\n                        course:  course\n                    },\n                }])[0].done(function(response) {\n                    var data = JSON.parse(response);\n                    thisObject.associationsEditor.associationsList.empty();\n                    thisObject.associationsEditor.associationTagsSelect.loadOptions(data);\n                    return;\n                }).fail(notification.exception);\n            });\n        };\n    }\n\n    return {\n        init: function() {\n            $(document).ready(function() {\n                if ($('#id_wiki_header .alert-danger').length) {\n                    // Disable action buttons if no wiki in course.\n                    $('#id_submitbutton').attr('disabled', 'disabled');\n                    $('#id_submitbutton2').attr('disabled', 'disabled');\n                } else {\n                    var wikifilter = new WikifilterEditor();\n                    wikifilter.init();\n                }\n            });\n        }\n    };\n});\n\n"],"names":["define","$","ajax","autocomplete","str","notification","AssociationsList","table","tableClone","rowClone","this","emptyRowClone","addRow","selectedRole","selectedTags","newRow","clone","removeClass","newRowData","buildRowData","fillRow","length","remove","append","modifyRow","row","rowData","deleteRow","emptyRow","addClass","empty","closest","roleCell","name","tagsCell","actionsCell","each","thisTagElement","thisTagId","attr","thisTagText","text","replace","id","roleId","roleName","data","html","AssociationRoleSelect","element","showInEditMode","role","addOption","setValue","disable","showInAddMode","selectedRoles","thisObject","enable","thisRoleId","deleteOption","value","val","getSelectedOption","find","deleteSelectedOption","key","appendTo","prop","AssociationTagsSelect","selectOption","buildAutocompleteComponent","unselectOptions","get_strings","component","then","langstrings","placeholder","noSelectionString","nextAll","enhance","fail","exception","loadOptions","reset","AssociationsEditor","associationsList","associationRoleSelect","associationTagsSelect","associationEditorModal","addTitle","editTitle","addBtn","modifyBtn","deleteBtn","init","events","showModalEvent","hideModalEvent","addEvent","modifyEvent","deleteEvent","on","e","callerBtn","relatedTarget","hasClass","thisRoleName","updateModalSections","thisRoleRow","thisRoleTags","removeErrors","mode","click","tagsSelection","validate","thisRow","modal","next","focus","selectionArea","WikifilterEditor","wiki","associations","associationsEditor","wikiChangeEvent","change","wikiID","course","call","methodname","args","done","response","JSON","parse","document","ready"],"mappings":"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"}